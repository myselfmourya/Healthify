import{c as x,a as y,d as j,r as i,j as e,S as m,M as f,b as c,e as N,A as v,m as w}from"./index-B0BMMOO8.js";import{M as k}from"./MobileLayout-D2nqiddE.js";import{R as A}from"./refresh-ccw-BNQVxVSj.js";const C=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],L=x("bell-ring",C);const M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],S=x("target",M);function O(){const{t}=y(),{user:T}=j(),[l,h]=i.useState([]),[a,n]=i.useState(!0),[d,g]=i.useState("Determining location..."),o=async s=>{n(!0);try{const u=await(await fetch("/api/advanced/outbreaks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:s})})).json();h(u.alerts||[])}catch(r){console.error(r)}finally{n(!1)}};i.useEffect(()=>{setTimeout(()=>{const s="Metropolitan Area (Zone 4)";g(s),o(s)},800)},[]);const b={CRITICAL:"bg-rose-50 border-rose-200 text-rose-800",HIGH:"bg-orange-50 border-orange-200 text-orange-800",MODERATE:"bg-amber-50 border-amber-200 text-amber-800",LOW:"bg-emerald-50 border-emerald-200 text-emerald-800"},p={CRITICAL:"bg-rose-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-amber-500 text-white",LOW:"bg-emerald-500 text-white"};return e.jsxs(k,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-gray-900 flex items-center gap-2",children:[e.jsx(m,{className:"w-6 h-6 text-emerald-600"}),t("Hyperlocal Alerts")]}),e.jsxs("p",{className:"text-sm text-gray-500 font-medium mt-1 flex items-center gap-1.5",children:[e.jsx(f,{className:"w-3.5 h-3.5"})," ",t(d)]})]}),e.jsx("button",{onClick:()=>o(d),disabled:a,className:"w-10 h-10 rounded-full bg-emerald-50 flex items-center justify-center text-emerald-600 hover:bg-emerald-100 transition-colors",children:e.jsx(A,{className:c("w-5 h-5",a&&"animate-spin")})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-5 border border-gray-100 shadow-[0_4px_20px_rgb(0,0,0,0.03)] flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center shrink-0",children:e.jsx(S,{className:"w-6 h-6 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:t("Current Status")}),e.jsx("p",{className:"text-sm font-bold text-gray-900 leading-tight mt-0.5",children:a?t("Scanning region..."):`${l.length} ${t("active outbreak patterns detected nearby.")}`})]})]}),a?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mb-4",children:[e.jsx("div",{className:"absolute inset-0 bg-emerald-500 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute inset-2 bg-emerald-500 rounded-full animate-ping opacity-40 delay-150"}),e.jsx("div",{className:"absolute inset-4 bg-emerald-600 rounded-full flex items-center justify-center shadow-lg shadow-emerald-200",children:e.jsx(N,{className:"w-4 h-4 text-white"})})]}),e.jsx("p",{className:"text-sm font-bold text-gray-500",children:t("Triangulating epidemiological data...")})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{children:l.map((s,r)=>e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.1},className:c("rounded-2xl p-4 border",b[s.riskLevel]),children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg leading-tight",children:t(s.disease)}),e.jsxs("p",{className:"text-xs opacity-80 mt-0.5",children:[s.casesReported," ",t("cases reported locally")]})]}),e.jsx("span",{className:c("text-[10px] font-black uppercase tracking-widest px-2.5 py-1 rounded-full",p[s.riskLevel]),children:t(s.riskLevel)})]}),e.jsxs("div",{className:"bg-white/50 rounded-xl p-3 flex gap-3 items-start mt-2",children:[e.jsx(L,{className:"w-4 h-4 shrink-0 mt-0.5 opacity-70"}),e.jsx("p",{className:"text-sm font-medium leading-snug",children:t(s.recommendation)})]})]},s.id))}),l.length===0&&!a&&e.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-2xl p-8 text-center",children:[e.jsx(m,{className:"w-12 h-12 text-emerald-400 mx-auto mb-3 opacity-50"}),e.jsx("h3",{className:"font-bold text-emerald-800 mb-1",children:t("All Clear")}),e.jsx("p",{className:"text-sm text-emerald-600/80",children:t("No significant disease outbreaks detected in your immediate vicinity.")})]})]})]})]})}export{O as default};
