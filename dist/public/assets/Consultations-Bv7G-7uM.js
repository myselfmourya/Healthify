import{c as S,d as Q,u as Z,a as q,r,j as e,M as w,b as c,m as d,X as $,A as R,e as ee}from"./index-B0BMMOO8.js";import{M as te}from"./MobileLayout-D2nqiddE.js";import{C as se}from"./ConfirmModal-Co7n_-f4.js";import{S as ae}from"./search-B1HaL0La.js";import{C as z}from"./calendar-BtimVvd2.js";import{P as re}from"./pill-DHpeHmp7.js";import{P as k}from"./phone-DgGuLPZY.js";import{C as le}from"./clock-C4UnRh36.js";import{I as ne}from"./indian-rupee-nVgV41te.js";import{C as ie}from"./check-BdKeHo3e.js";import{S as oe}from"./shield-check-CqJhENm0.js";import"./circle-alert-CX-_l5l9.js";const ce=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],de=S("calendar-check",ce);const xe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],me=S("star",xe);const he=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],pe=S("video",he),ge=["All","Cardiologist","General Physician","Neurologist","Diabetologist","Gynecologist","Orthopedic"];function De(){const{user:C}=Q(),{addNotification:A}=Z(),{t:s}=q(),[F,D]=r.useState([]),[m,h]=r.useState([]),[p,O]=r.useState(""),[g,H]=r.useState("All"),[V,I]=r.useState(!0),[x,E]=r.useState("doctors"),[n,b]=r.useState(null),[i,u]=r.useState(""),[L,y]=r.useState(""),[f,T]=r.useState(!1),[G,P]=r.useState(!1),[M,j]=r.useState(""),[U,N]=r.useState(!1);r.useEffect(()=>{v(),B()},[]);const v=async(t=p,a=g)=>{I(!0);try{const l=new URLSearchParams;t&&l.set("search",t),a&&a!=="All"&&l.set("specialty",a);const _=await fetch(`/api/doctors?${l}`),o=await _.json();if(!_.ok||o.error||o.success===!1){D([]);return}const X=Array.isArray(o.data)?o.data:Array.isArray(o)?o:[];D(X)}catch{}I(!1)},B=async()=>{try{const t=await fetch("/api/appointments"),a=await t.json();if(!t.ok||a.error||a.success===!1){h([]);return}const l=Array.isArray(a.data)?a.data:Array.isArray(a)?a:[];h(l)}catch{}},Y=async()=>{if(!(!n||!i)){T(!0);try{await fetch("/api/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctorId:n.id,slot:i,userId:C.userId,userName:C.name,reason:L})}),A({type:"appointment",title:s("Appointment Booked"),message:`${s("With")} ${n.name} ${s("on")} ${new Date(i).toLocaleDateString()}`}),P(!0),B(),setTimeout(()=>{b(null),P(!1),u(""),y("")},2e3)}catch{}T(!1)}},J=async t=>{try{await fetch(`/api/appointments/${t}`,{method:"DELETE"}),h(a=>a.filter(l=>l.id!==t)),A({type:"info",title:s("Cancelled"),message:s("Appointment cancelled successfully")}),j("")}catch{}},K=t=>{O(t),v(t,g)},W=t=>{H(t),v(p,t)};return e.jsxs(te,{children:[e.jsxs("div",{className:"animate-in fade-in duration-500",children:[e.jsx("div",{className:"mb-6 pt-2",children:e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 leading-tight",children:[s("Smarter Choices for"),e.jsx("br",{}),e.jsx("span",{className:"text-indigo-500",children:s("Better Health")})]})}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(ae,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{className:"w-full pl-11 pr-12 py-4 rounded-2xl bg-white border border-gray-100 text-sm focus:outline-none shadow-[0_4px_20px_rgb(0,0,0,0.04)]",placeholder:s("Search doctors, symptoms..."),value:p,onChange:t=>K(t.target.value)}),e.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-indigo-500 p-2 rounded-xl border border-indigo-600 shadow-sm text-white",children:e.jsx(w,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2.5 overflow-x-auto pb-4 scrollbar-none mb-4 -mx-4 px-4 sm:mx-0 sm:px-0",children:[e.jsxs("button",{className:"flex-1 min-w-[100px] flex justify-center items-center gap-2 bg-indigo-600 text-white px-2 py-3 rounded-2xl text-xs font-bold transition-all shadow-md shadow-indigo-200 border border-indigo-600 pointer-events-none",children:[e.jsx(z,{className:"w-4 h-4"})," ",s("Doctor")]}),e.jsxs("a",{href:"/info?tab=medicines",className:"flex-1 min-w-[100px] flex justify-center items-center gap-2 bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 px-2 py-3 rounded-2xl text-xs font-bold transition-all shadow-sm",children:[e.jsx(re,{className:"w-4 h-4 text-indigo-500"})," ",s("Medicine")]}),e.jsxs("a",{href:"/info?tab=hospitals",className:"flex-1 min-w-[100px] flex justify-center items-center gap-2 bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 px-2 py-3 rounded-2xl text-xs font-bold transition-all shadow-sm",children:[e.jsx(w,{className:"w-4 h-4 text-blue-500"})," ",s("Hospital")]}),e.jsxs("button",{onClick:()=>N(!0),className:"flex-1 min-w-[100px] flex justify-center items-center gap-2 bg-red-50 text-red-600 hover:bg-red-100 border border-red-100 px-2 py-3 rounded-2xl text-xs font-bold transition-all",children:[e.jsx(k,{className:"w-4 h-4"})," ",s("Emergency")]})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"flex gap-4 border-b border-gray-100 w-full mb-1",children:[e.jsx("button",{onClick:()=>E("doctors"),className:c("pb-2 text-sm font-bold transition-all border-b-2 relative top-[1px]",x==="doctors"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-400"),children:s("Expert Doctors")}),e.jsxs("button",{onClick:()=>E("appointments"),className:c("pb-2 text-sm font-bold transition-all border-b-2 relative top-[1px]",x==="appointments"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-400"),children:[s("My Appointments")," (",m.length,")"]})]})}),x==="doctors"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-5 overflow-x-auto pb-1 scrollbar-none",children:ge.map(t=>e.jsx("button",{onClick:()=>W(t),className:c("shrink-0 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all whitespace-nowrap",g===t?"bg-indigo-50 text-indigo-600":"bg-gray-50 text-gray-500 hover:bg-gray-100"),children:s(t)},t))}),V?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsx("div",{className:"glass rounded-2xl p-4 animate-pulse",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-24 rounded-2xl bg-gray-200"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-9 bg-gray-200 rounded-xl"})]})]})},t))}):e.jsx("div",{className:"space-y-4 pb-4",children:F.map((t,a)=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.07},className:"glass rounded-2xl p-4 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-20 h-24 rounded-2xl object-cover"}),e.jsx("span",{className:c("absolute bottom-1 right-1 w-3 h-3 rounded-full border-2 border-white",t.available?"bg-green-400":"bg-gray-300")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-sm leading-tight",children:t.name}),e.jsxs("div",{className:"flex items-center gap-1 bg-amber-50 px-2 py-0.5 rounded-lg",children:[e.jsx(me,{className:"h-3 w-3 fill-amber-400 text-amber-400"}),e.jsx("span",{className:"text-xs font-bold text-amber-700",children:t.rating})]})]}),e.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:s(t.specialty)}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1 mb-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),t.experience,s("yr exp")]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"}),s(t.city)]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mb-2",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsxs("span",{className:"font-semibold text-gray-800",children:["₹",t.fee]}),e.jsx("span",{className:"text-gray-400",children:s("per consult")})]}),e.jsxs("button",{onClick:()=>{b(t),u(""),y("")},className:"w-full bg-blue-600 text-white py-2 rounded-xl text-xs font-bold flex items-center justify-center gap-1.5 hover:bg-blue-700 transition-colors",children:[e.jsx(de,{className:"w-3.5 h-3.5"})," ",s("Book Appointment")]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 leading-relaxed line-clamp-2",children:t.description}),e.jsx("div",{className:"flex gap-1 mt-2",children:t.languages.map(l=>e.jsx("span",{className:"bg-blue-50 text-blue-600 text-[10px] font-medium px-2 py-0.5 rounded-full",children:l},l))})]},t.id))})]}),x==="appointments"&&e.jsx("div",{className:"space-y-3 pb-4",children:m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(z,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"font-medium",children:s("No appointments yet")}),e.jsx("p",{className:"text-sm",children:s("Book one from the Doctors tab")})]}):m.map(t=>e.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass rounded-2xl p-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:t.doctorImage,alt:"",className:"w-12 h-12 rounded-xl object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-900",children:t.doctorName}),e.jsx("p",{className:"text-xs text-blue-600",children:s(t.doctorSpecialty)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[new Date(t.slot).toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short",year:"numeric"})," · ",new Date(t.slot).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]}),t.reason&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:t.reason})]}),e.jsx("span",{className:"bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded-xl h-fit",children:s("Confirmed")})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("a",{href:`https://meet.jit.si/healthify-${t.id}`,target:"_blank",rel:"noreferrer",className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 bg-blue-600 text-white rounded-xl text-xs font-bold hover:bg-blue-700",children:[e.jsx(pe,{className:"w-3.5 h-3.5"})," ",s("Start Call")]}),e.jsxs("button",{onClick:()=>j(t.id),className:"flex items-center justify-center gap-1.5 px-4 py-2.5 bg-red-50 text-red-600 rounded-xl text-xs font-bold hover:bg-red-100",children:[e.jsx($,{className:"w-3.5 h-3.5"})," ",s("Cancel")]})]})]},t.id))})]}),e.jsx(R,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[60]",onClick:()=>b(null)}),e.jsx(d.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25},className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white rounded-t-3xl z-[70] p-6",style:{maxHeight:"85vh",overflowY:"auto"},children:G?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s("Appointment Booked!")}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s("You'll receive a confirmation shortly.")})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-3 mb-5",children:[e.jsx("img",{src:n.image,alt:"",className:"w-14 h-14 rounded-2xl object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:n.name}),e.jsx("p",{className:"text-sm text-blue-600",children:s(n.specialty)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["₹",n.fee," ",s("consultation fee")]})]})]}),e.jsx("h4",{className:"text-sm font-bold text-gray-700 mb-2",children:s("Select Date & Time")}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:n.availableSlots.map(t=>e.jsxs("button",{onClick:()=>u(t),className:c("py-2.5 px-3 rounded-xl text-xs font-medium text-left transition-all border",i===t?"bg-blue-600 text-white border-blue-600":"bg-gray-50 text-gray-700 border-gray-200 hover:border-blue-300"),children:[e.jsx("p",{className:"font-semibold",children:new Date(t).toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"})}),e.jsx("p",{className:"opacity-70",children:new Date(t).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]},t))}),e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:s("Reason for Visit (optional)")}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-2xl border border-gray-200 text-sm resize-none focus:outline-none focus:border-blue-500",rows:2,placeholder:s("Describe your symptoms or reason for appointment..."),value:L,onChange:t=>y(t.target.value)}),e.jsx("button",{onClick:Y,disabled:!i||f,className:c("w-full mt-4 py-4 rounded-2xl font-bold text-sm flex items-center justify-center gap-2 transition-all",i&&!f?"bg-blue-600 text-white hover:bg-blue-700 shadow-lg":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:s(f?"Booking...":"Confirm Appointment")})]})})]})}),e.jsx(se,{isOpen:!!M,title:s("Cancel Appointment?"),description:s("Are you sure you want to cancel this booking? This action cannot be undone."),confirmText:s("Cancel Booking"),cancelText:s("Keep"),danger:!0,onConfirm:()=>J(M),onCancel:()=>j("")}),e.jsx(R,{children:U&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>N(!1),children:e.jsxs(d.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"bg-red-500 p-6 text-center relative",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(k,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:s("Emergency Contacts")}),e.jsx("p",{className:"text-red-100 text-sm",children:s("Tap any number to call immediately")}),e.jsx("button",{onClick:()=>N(!1),className:"absolute top-4 right-4 text-white hover:bg-white/20 p-2 rounded-full transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-3 max-h-[60vh] overflow-y-auto",children:[e.jsxs("a",{href:"tel:100",className:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-red-200 hover:bg-red-50 transition-all group active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:e.jsx(oe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-red-600",children:"100"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("Police Control Room")}),e.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:s("For crimes and immediate security issues")})]})]}),e.jsxs("a",{href:"tel:108",className:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-red-200 hover:bg-red-50 transition-all group active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center shrink-0 group-hover:bg-red-500 transition-colors",children:e.jsx(ee,{className:"w-6 h-6 text-red-600 group-hover:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-red-600 transition-colors",children:"108"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("National Ambulance Service")}),e.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:s("For medical emergencies and accidents")})]})]}),e.jsxs("a",{href:"tel:112",className:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-red-200 hover:bg-red-50 transition-all group active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center shrink-0",children:e.jsx(k,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-red-600",children:"112"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("National Emergency Number")}),e.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:s("All-in-one emergency helpline")})]})]})]})]})})})]})}export{De as default};
