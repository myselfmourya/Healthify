import{a as N,d as k,r as c,j as e,L as z,A as S,m as x,e as f,Q as A,b as m}from"./index-B0BMMOO8.js";import{M as q}from"./MobileLayout-D2nqiddE.js";import{A as C}from"./arrow-left-CH1M9uQR.js";import{C as R}from"./circle-check-Cfh2Dq-1.js";import{I}from"./info-BuNa196L.js";import{R as H}from"./refresh-ccw-BNQVxVSj.js";function P(){const{t}=N(),{user:h}=k(),[s,o]=c.useState(0),[l,g]=c.useState(null),[u,b]=c.useState({}),[r,p]=c.useState(null),[L,d]=c.useState(!1),y=async()=>{d(!0),o(10);try{const n=await(await fetch("/api/advanced/quiz/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:"lifestyle",userId:h.userId})})).json();g(n),o(1)}catch(a){console.error("Failed to generate quiz:",a),o(0)}finally{d(!1)}},w=(a,n)=>{b(i=>({...i,[a]:n})),setTimeout(()=>{l&&s<l.questions.length?o(i=>i+1):j({...u,[a]:n})},300)},j=async a=>{d(!0),o(10);try{const i=await(await fetch("/api/advanced/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:"lifestyle",userId:h.userId,answers:a})})).json();p({score:i.profile.lifestyleScore,tier:parseInt(i.profile.lifestyleScore)>75?"Excellent":parseInt(i.profile.lifestyleScore)>45?"Average":"High Risk",insight:i.insight}),o(11)}catch(n){console.error("Failed to submit quiz:",n),o(0)}finally{d(!1)}},v=()=>{b({}),p(null),o(0)};return e.jsxs(q,{children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-50 z-[-1] overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-emerald-100/60 blur-[100px] rounded-full mix-blend-multiply"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[400px] h-[400px] bg-cyan-100/60 blur-[100px] rounded-full mix-blend-multiply"})]}),e.jsx("div",{className:"mb-8 pt-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(z,{href:"/",children:e.jsx("a",{className:"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-600 shadow-sm hover:bg-slate-50 transition-colors",children:e.jsx(C,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-slate-800 flex items-center gap-2",children:e.jsx("span",{className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-emerald-600",children:t("Vitality Rhythm")})}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold tracking-widest uppercase mt-0.5",children:t("Metabolic Harmony")})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-[32px] p-6 border border-white shadow-[0_8px_30px_rgba(0,0,0,0.04)] min-h-[480px] flex flex-col relative overflow-hidden",children:e.jsxs(S,{mode:"wait",children:[s===0&&e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col items-center justify-center text-center inset-0 absolute p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-50/50 to-emerald-50/50 mix-blend-overlay"}),e.jsx("div",{className:"w-24 h-24 rounded-full bg-cyan-50 text-cyan-600 border border-cyan-100 shadow-sm flex items-center justify-center mb-8 relative z-10",children:e.jsx(f,{className:"w-10 h-10"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2 tracking-wide relative z-10",children:t("Evaluate Vitality")}),e.jsx("p",{className:"text-xs text-slate-500 mb-10 max-w-[250px] mx-auto leading-relaxed relative z-10 font-medium",children:t("Conduct an AI-driven behavioral assessment to optimize your metabolic rhythm.")}),e.jsxs("button",{onClick:y,className:"w-full max-w-[200px] py-4 bg-gradient-to-r from-cyan-600 to-emerald-600 hover:from-cyan-500 hover:to-emerald-500 text-white rounded-[20px] font-bold uppercase tracking-widest text-sm transition-all shadow-lg flex items-center justify-center gap-3 relative z-10",children:[t("Begin Assessment")," ",e.jsx(A,{className:"w-5 h-5 text-cyan-50"})]})]},"intro"),l&&s>=1&&s<=l.questions.length&&e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col w-full h-full inset-0 absolute p-6",children:[e.jsx("div",{className:"mb-8 flex items-center gap-4",children:e.jsx("div",{className:"flex-1 h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-cyan-500 shadow-sm transition-all duration-500 ease-out",style:{width:`${s/l.questions.length*100}%`}})})}),e.jsxs("p",{className:"text-[10px] font-bold text-cyan-600 uppercase tracking-widest mb-4",children:[t("Parameter")," ",s," ",t("of")," ",l.questions.length]}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 leading-relaxed mb-8",children:l.questions[s-1].title}),e.jsx("div",{className:"space-y-3",children:l.questions[s-1].options.map((a,n)=>{const i=u[l.questions[s-1].id]===a.value;return e.jsxs("button",{onClick:()=>w(l.questions[s-1].id,a.value),className:m("w-full p-5 rounded-[20px] border text-left font-medium transition-all duration-300 flex items-center justify-between shadow-sm",i?"bg-cyan-50 border-cyan-300 text-cyan-900":"bg-white border-slate-200 text-slate-600 hover:border-cyan-300 hover:bg-cyan-50/50 hover:text-cyan-800"),children:[t(a.label),i&&e.jsx(R,{className:"w-5 h-5 text-cyan-600"})]},n)})})]},`q${s}`),s===10&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center text-center inset-0 absolute p-6",children:[e.jsx("div",{className:"w-16 h-16 border-[3px] border-cyan-100 border-t-cyan-500 rounded-full animate-spin mb-6 text-cyan-500 shadow-sm flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 animate-pulse text-cyan-500"})}),e.jsx("p",{className:"text-xs text-slate-500 font-bold tracking-widest uppercase animate-pulse",children:t("Coalescing Vitality Data...")})]},"loading"),s===11&&r&&e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex-1 flex flex-col w-full h-full inset-0 absolute p-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-sm font-bold tracking-widest uppercase text-slate-500",children:t("Vitality Score")}),e.jsx("span",{className:m("text-[10px] font-bold uppercase tracking-widest px-3 py-1.5 rounded-full border shadow-sm",r.tier==="High Risk"?"bg-white text-rose-600 border-rose-200":r.tier==="Average"?"bg-white text-amber-600 border-amber-200":"bg-white text-emerald-600 border-emerald-200"),children:t(r.tier)})]}),e.jsxs("div",{className:m("rounded-[32px] p-10 text-center mb-8 border border-white relative overflow-hidden shadow-[0_8px_30px_rgba(0,0,0,0.04)]",r.tier==="High Risk"?"bg-rose-50":r.tier==="Average"?"bg-amber-50":"bg-emerald-50"),children:[e.jsx("span",{className:m("text-6xl md:text-7xl font-black tracking-tight leading-none block mb-3 relative z-10 drop-shadow-sm text-transparent bg-clip-text",r.tier==="High Risk"?"bg-gradient-to-b from-rose-500 to-rose-700":r.tier==="Average"?"bg-gradient-to-b from-amber-500 to-amber-700":"bg-gradient-to-b from-emerald-500 to-emerald-700"),children:r.score}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest relative z-10",children:t("Metabolic Harmony Index")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 tracking-wider uppercase text-xs flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-cyan-600"}),t("AI Recommendations")]}),e.jsx("div",{className:"p-5 bg-white rounded-[24px] border border-slate-100 shadow-sm",children:e.jsx("p",{className:"text-[13px] text-slate-600 leading-relaxed font-medium",children:r.insight})})]}),e.jsxs("button",{onClick:v,className:"w-full mt-auto py-4 bg-white border border-slate-200 hover:bg-slate-50 text-slate-700 rounded-[20px] font-bold uppercase tracking-widest text-[11px] transition-all flex items-center justify-center gap-2 shadow-sm",children:[e.jsx(H,{className:"w-4 h-4 text-cyan-600"})," ",t("Start New Rhythm Check")]})]},"results")]})})]})}export{P as default};
